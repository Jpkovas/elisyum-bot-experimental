# Recent Changes

- Bloqueamos mensagens de membros mutados quando o bot é admin e interrompemos os contadores do fluxo, com testes para garantir o comportamento em grupos.
- Adicionado comando de grupo `silenciar` para alternar o mute individual com validações de admin e respostas específicas para mutar/desmutar.
- Adicionada persistência para membros mutados nos grupos, com métodos de controle e remoção automática ao sair.
- Normalizamos os IDs de usuários vindos de grupos e recriamos cadastros ausentes ao abrir o menu para evitar erros de "usuário não encontrado".
- Registrados logs e filtragens para eventos de newsletters/canais no Baileys 7, isolando mensagens de broadcast do fluxo padrão.
- Ajustado o balão de figurinhas de texto para priorizar o nome do contato citado em vez do texto padrão "Membro do grupo".
- Padronizado o projeto no Yarn 4, ajustando scripts, resolução do libsignal e removendo o `package-lock.json` legado.
- Ajustados os imports do Baileys para usar o default `makeWASocket` e confirmada a compilação com a base ESM/TS.
- Refatorado o cache de contatos bloqueados para um helper dedicado e cobrimos hits e invalidações com novos testes.
- Implemented caching for blocked contacts with automatic invalidation after block/unblock operations.
- Atualizada a sincronização de grupos para aguardar a remoção completa antes de continuar.
- Processa cada mensagem recebida individualmente, reutilizando dados de grupo no lote para evitar consultas duplicadas.
- Added cached bot admin lookup with invalidation after admin role updates to reduce repeated database calls.
- Adicionada resposta guiando usuários para {$p}menu ou {$p}comando guia quando um comando desconhecido for digitado.
- Atualizadas as dependências (jimp 1.x, canvas 3.x e jsdom 26) para remover conflitos de instalação com Baileys e adaptado o utilitário de figurinhas para a nova API.
- Migrated to @whiskeysockets/baileys 7.0.0-rc.5 and enforced Node.js 20+ across tooling and documentation.
- Adicionada uma configuração mínima do webpack e dependências de CLI para que o `npx webpack` execute sem intervenção manual no CI.
- Protegido o estado NeDB com mutexes e desserialização via `proto.Message.AppStateSyncKeyData`, validado pelo teste `npx tsx tests/session.auth.helper.test.ts` para garantir persistência e limpeza das novas chaves de login.
- Ajustados eventos/formatadores para o Baileys 7 (participantes como objetos, requestId e contexto de download de mídia) e cobrimos os fluxos com novos testes de fila, mídia e formatação.
- Instaladas as dependências opcionais do Baileys (sharp, audio-decode, link-preview-js) com testes de mídia cobrindo miniaturas e waveform, além de documentação atualizada para setup e troubleshooting.
